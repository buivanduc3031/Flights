{% extends 'layout/base.html' %}

{% block content %}

<div class="container mt-5">
    <div class="row">
        <!-- Bộ lọc bên trái -->
        <div class="col-md-3">
            <div class="card p-3 border rounded shadow-sm bg-light">
                <h5 class="text-primary">Bộ lọc</h5>
                <h6 class="text-secondary">Điểm dừng</h6>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="directFlight">
                    <label class="form-check-label" for="directFlight">Bay thẳng</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="oneStop">
                    <label class="form-check-label" for="oneStop">1 điểm dừng</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="multipleStops">
                    <label class="form-check-label" for="multipleStops">Nhiều điểm dừng</label>
                </div>

                <h6 class="text-secondary">Giờ cất cánh</h6>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="departureNight">
                    <label class="form-check-label" for="departureNight">
                        Đêm
                        <span class="time-range">(00:00 - 06:00)</span>
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="departureMorning">
                    <label class="form-check-label" for="departureMorning">
                        Sáng
                        <span class="time-range">(06:00 - 12:00)</span>
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="departureAfternoon">
                    <label class="form-check-label" for="departureAfternoon">
                        Chiều
                        <span class="time-range">(12:00 - 18:00)</span>
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="departureEvening">
                    <label class="form-check-label" for="departureEvening">
                        Tối
                        <span class="time-range">(18:00 - 24:00)</span>
                    </label>
                </div>

                <h6 class="text-secondary">Giờ hạ cánh</h6>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="arrivalNight">
                    <label class="form-check-label" for="arrivalNight">
                        Đêm
                        <span class="time-range">(00:00 - 06:00)</span>
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="arrivalMorning">
                    <label class="form-check-label" for="arrivalMorning">
                        Sáng
                        <span class="time-range">(06:00 - 12:00)</span>
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="arrivalAfternoon">
                    <label class="form-check-label" for="arrivalAfternoon">
                        Chiều
                        <span class="time-range">(12:00 - 18:00)</span>
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="arrivalEvening">
                    <label class="form-check-label" for="arrivalEvening">
                        Tối
                        <span class="time-range">(18:00 - 24:00)</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Danh sách chuyến bay bên phải -->
        <div class="col-md-9">
            {% for flight in flights %}
            <div class="card mb-3">
                <div class="card-header bg-primary text-white">
                    {{ flight.plane.plane_name }}
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="time">
                            <h6 class="mb-0 text-success">{{ flight.f_dept_time.strftime('%H:%M') }}</h6>
                            <span class="text-muted">{{ flight.flight_route.departure_airport.airport_name }}</span>
                        </div>

                        <div class="text-center">
                            <h6 class="mb-0 text-info">{{ flight.flight_type.name }}</h6>
                            <div><i class="bi bi-arrow-right"></i></div>
                            <span class="text-muted">{{ flight.flight_duration }} giờ</span>
                        </div>
                        <div class="time">
                            <h6 class="mb-0 text-success">{{ flight.flight_arr_time.strftime('%H:%M') }}</h6>
                            <span class="text-muted">{{ flight.flight_route.arrival_airport.airport_name }}</span>
                        </div>

                        <div class="price text-danger">
                            <span>{{ flight.flight_price | intcomma }} VNĐ/khách</span>
                        </div>
                        <div>
                            <button class="btn btn-primary" data-bs-toggle="collapse"
                                    data-bs-target="#economyDetails-{{ flight.flight_id }}">
                                Chọn <i class="bi bi-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Economy Cards -->

            </div>
            <div class="collapse mt-2" id="economyDetails-{{ flight.flight_id }}">
                <div class="row">
                    {% for card in flight.economy_cards %}
                    <div class="col-md-4 mb-3">
                        <div class="card border-info">
                            <div class="card-body">
                                <h5 class="card-title text-info">{{ card.card_name }}</h5>
                                <hr>
                                <h6>Hành lý</h6>
                                <ul class="list-unstyled">
                                    <li><i class="bi bi-bag-check"></i> Hành lý ký gửi: <strong>{{ 'Có' if
                                        card.baggage_check_in else 'Không' }}</strong></li>
                                    <li><i class="bi bi-bag"></i> Xách tay: <strong>{{ card.baggage_hand_luggage
                                        }}</strong></li>
                                </ul>
                                <h6>Điều kiện vé</h6>
                                <p class="price text-danger">{{ card.price | intcomma }} VNĐ</p>

                                <input type="hidden" name="flight_id" value="{{ flight.flight_id }}">
                                <input type="hidden" name="card_id" value="{{ card.id }}">
                                <button type="submit" class="btn btn-success">Đặt vé</button>

                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>

    </div>
</div>

{% endblock %}
